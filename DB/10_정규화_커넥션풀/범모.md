## 내용 정리
### 이상현상

이상 현상은 테이블을 설계할 때 잘못 설계하여 데이터를 삽입, 삭제, 수정할 때 논리적으로 생기는 오류를 말합니다. 데이터의 중복이 발생하고 전체적인 무결성이 저하시킨다.
이상 현상은 갱신 이상(Modification ANomaly), 삽입 이상(Insertion Anomaly), 삭제 이상(Deletion Anomaly)으로 나뉜다.

### 삽입 이상

자료를 삽입할 때 의도하지 않은 자료까지 삽입해야만 자료를 테이블에 추가가 가능한 현상
강의를 아직 수강하지 않은 새로운 학생을 삽입할 경우 강의 코드와 강의명 속성에는 null값이 들어가야 하는 문제가 생깁니다.

### 갱신 이상

중복된 데이터 중 일부만 수정되어 데이터 모순이 일어나는 현상
강의 코드가 "AC3"인 김현수의 전화번호를 수정할 경우, 3번째 튜플의 데이터만 수정될 것입니다.
그러면 3, 4번째 튜플은 같은 사용자의 데이터임에도 불구하고 전화번호가 다르게 됩니다.

### 삭제 이상

어떤 정보를 삭제하면, 의도하지 않은 다른 정보까지 삭제되어버리는 현상
강의코드가 "AC1"인 데이터베이스 개론 강의를 삭제하게 되면, 이태호 학생의 데이터까지 삭제되어버립니다.

### 정규화

이상현상이 있는 릴레이션을 분해하여 이상현상을 없애는 과정.

정규화(Normalization)의 기본 목표는 테이블 간에 중복된 데이타를 허용하지 않는 것이다. 중복된 데이터를 허용하지 않음으로써 무결성(Integrity)를 유지할 수 있으며, DB의 저장 용량 역시 줄일 수 있다.

### 제1정규화

- 테이블의 컬럼이 원자값(Atomic Value, 하나의 값)을 갖도록 테이블을 분해하는 것

### 제2정규화

- 제1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것이다. 여기서 완전 함수 종속이라는 것은 기본키의 부분집합이 결정자가 되어선 안된다는 것을 의미한다.

### 제3정규화

- 제2 정규화를 진행한 테이블에 대해 이행적 종속을 없애도록 테이블을 분해하는 것이다. 여기서 이행적 종속이라는 것은 A -> B, B -> C가 성립할 때 A -> C가 성립되는 것을 의미한다.
- 불필요한 join을 피하기 위함.

### BCNF 정규화

- 제3 정규화를 진행한 테이블에 대해 모든 결정자가 후보키가 되도록 테이블을 분해하는 것

BCNF 이상 정규화를 하면 정규화의 단점이 나타날 수도 있다.

### 정규화 장단점

### 장점

- 데이터베이스 변경 시 이상 현상(Anomaly)을 제거할 수 있다.
- 정규화된 데이터베이스 구조에서는 새로운 데이터 형의 추가로 인한 확장 시, 그 구조를 변경하지 않아도 되거나 일부만 변경해도 된다.
- 데이터베이스와 연동된 응용 프로그램에 최소한의 영향만을 미치게 되어 응용프로그램의 생명을 연장시킨다.

### 단점

- 릴레이션의 분해로 인해 릴레이션 간의 JOIN연산이 많아진다.
- 질의에 대한 응답 시간이 느려질 수도 있다. 데이터의 중복 속성을 제거하고 결정자에 의해 동일한 의미의 일반 속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량이 최소화되는 효과가 있다.
- 따라서 데이터를 처리할 때 속도가 빨라질 수도 있고 느려질 수도 있다.
- 만약 조인이 많이 발생하여 성능 저하가 나타나면 반정규화(De-normalization)를 적용할 수도 있다.

### 역정규화

중복을 허용하며 Entity를 다시 통합하거나 분할하여 정규화 과정을 통해 도출된 DB 구조를 재조정하는 과정이다.

1. 자주 사용되는 테이블에 액세스하는 프로세스의 수가 가장 많고, 항상 일정한 범위만을 조회하는 경우
2. 테이블에 대량 데이터가 있고 대량의 범위를 자주 처리하는 경우, 성능 상 이슈가 있을 경우
3. 테이블에 지나치게 조인을 많이 사용하게 되어 데이터를 조회하는 것이 기술적으로 어려울 경우

### 역정규화 장단점

### **장점**

- 빠른 데이터 조회

  → 조인 비용이 줄어들기 때문

- 살펴볼 테이블이 줄어들기 때문에 데이터 조회 쿼리가 간단해짐

  → 따라서 버그 발생 가능성도 줄어든다


### **단점**

- 데이터 갱신이나 삽입 비용이 높음
- 데이터 갱신 또는 삽입 코드를 작성하기 어려워짐
- *데이터 간의 일관성*이 깨어질 수 있다. 어느 쪽이 올바른 값인가?
- 데이터를 중복하여 저장하므로 더 많은 저장 공간이 필요

### DB 커넥션 풀

## DB 커넥션 풀이란?

> WAS가 실행되면서 DB와 미리 연결해둔 객체를 저장해 두고,
클라이언트가 DB에 접근 시도를 할 때 해당 객체를 꺼내주는 곳.
>

## DB 커넥션 풀을 왜 쓰지?

개발자가 DB연결이 필요한 곳 마다 매번 드라이버를 로드하고, 커넥션 객체를 얻어 온 후 사용이 끝나면 커넥션을 닫는 것이 비효율적이기 때문.

## DB 커넥션 풀의 특징

- 웹 컨테이너(WAS)가 실행되면서 connection 객체를 미리 pool에 생성해 둔다.
- HTTP 요청에 따라 pool에서 connection객체를 가져다 쓰고 반환한다.
- pool에 미리 connection이 생성되어 있기 때문에 connection을 생성하는 데 드는 시간이 절약된다.
- 커넥션을 계속해서 재사용하기 때문에 생성되는 커넥션 수를 제한적으로 설정한다. (무분별하게 리소스를 낭비하지 않는다.)

## DB 커넥션 풀 주의사항

- DB 동시 접근자가 많은 경우, 커넥션 수는 제한되어 있으므로 응답시간이 길어진다.
- 그렇다고 Pool size를 크게 설정하면 그만큼 메모리가 낭비되니 너무 크게 설정하면 안된다.

### ref

- anomaly : https://dev-coco.tistory.com/63
- 정규화 : https://code-lab1.tistory.com/48, https://mangkyu.tistory.com/110
- 역정규화 : https://owlyr.tistory.com/20

## 질문 정리
### 이상현상이 무엇인가요? 어떤 종류가 있나요?

이상 현상은 테이블을 설계할 때 잘못 설계하여 데이터를 삽입, 삭제, 수정할 때 논리적으로 생기는 오류를 말합니다. 데이터의 중복이 발생하고 전체적인 무결성이 저하시킨다.
이상 현상은 갱신 이상(Modification ANomaly), 삽입 이상(Insertion Anomaly), 삭제 이상(Deletion Anomaly)으로 나뉜다.

### 삽입 이상

자료를 삽입할 때 의도하지 않은 자료까지 삽입해야만 자료를 테이블에 추가가 가능한 현상
강의를 아직 수강하지 않은 새로운 학생을 삽입할 경우 강의 코드와 강의명 속성에는 null값이 들어가야 하는 문제가 생깁니다.

### 갱신 이상

중복된 데이터 중 일부만 수정되어 데이터 모순이 일어나는 현상
강의 코드가 "AC3"인 김현수의 전화번호를 수정할 경우, 3번째 튜플의 데이터만 수정될 것입니다.
그러면 3, 4번째 튜플은 같은 사용자의 데이터임에도 불구하고 전화번호가 다르게 됩니다.

### 삭제 이상

어떤 정보를 삭제하면, 의도하지 않은 다른 정보까지 삭제되어버리는 현상
강의코드가 "AC1"인 데이터베이스 개론 강의를 삭제하게 되면, 이태호 학생의 데이터까지 삭제되어버립니다.

### 정규화가 무엇인지, 제1정규화~BCNF정규화까지 순서대로 설명해주세요.

이상현상이 있는 릴레이션을 분해하여 이상현상을 없애는 과정.

정규화(Normalization)의 기본 목표는 테이블 간에 중복된 데이타를 허용하지 않는 것이다. 중복된 데이터를 허용하지 않음으로써 무결성(Integrity)를 유지할 수 있으며, DB의 저장 용량 역시 줄일 수 있다.

### 제1정규화

- 테이블의 컬럼이 원자값(Atomic Value, 하나의 값)을 갖도록 테이블을 분해하는 것

### 제2정규화

- 제1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것이다. 여기서 완전 함수 종속이라는 것은 기본키의 부분집합이 결정자가 되어선 안된다는 것을 의미한다.

### 제3정규화

- 제2 정규화를 진행한 테이블에 대해 이행적 종속을 없애도록 테이블을 분해하는 것이다. 여기서 이행적 종속이라는 것은 A -> B, B -> C가 성립할 때 A -> C가 성립되는 것을 의미한다.
- 불필요한 join을 피하기 위함.

### BCNF 정규화

- 제3 정규화를 진행한 테이블에 대해 모든 결정자가 후보키가 되도록 테이블을 분해하는 것

BCNF 이상 정규화를 하면 정규화의 단점이 나타날 수도 있다.

### 정규화의 장단점에 대해 설명해 주세요.

### 장점

- 데이터베이스 변경 시 이상 현상(Anomaly)을 제거할 수 있다.
- 정규화된 데이터베이스 구조에서는 새로운 데이터 형의 추가로 인한 확장 시, 그 구조를 변경하지 않아도 되거나 일부만 변경해도 된다.
- 데이터베이스와 연동된 응용 프로그램에 최소한의 영향만을 미치게 되어 응용프로그램의 생명을 연장시킨다.
- 저장 공간의 최소화 가능
- 데이터 구조의 안정성 및 무결성 유지

### 단점

- 릴레이션의 분해로 인해 릴레이션 간의 JOIN연산이 많아진다.
- 질의에 대한 응답 시간이 느려질 수도 있다. 데이터의 중복 속성을 제거하고 결정자에 의해 동일한 의미의 일반 속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량이 최소화되는 효과가 있다.
- 따라서 데이터를 처리할 때 속도가 빨라질 수도 있고 느려질 수도 있다.
- 만약 조인이 많이 발생하여 성능 저하가 나타나면 반정규화(De-normalization)를 적용할 수도 있다.

### 역정규화가 무엇인지 말씀해 주시고, 장단점에 대해 설명해 주세요.

중복을 허용하며 Entity를 다시 통합하거나 분할하여 정규화 과정을 통해 도출된 DB 구조를 재조정하는 과정이다.

### **장점**

- 빠른 데이터 조회

  → 조인 비용이 줄어들기 때문

- 살펴볼 테이블이 줄어들기 때문에 데이터 조회 쿼리가 간단해짐

  → 따라서 버그 발생 가능성도 줄어든다


### **단점**

- 데이터 갱신이나 삽입 비용이 높음
- 데이터 갱신 또는 삽입 코드를 작성하기 어려워짐
- *데이터 간의 일관성*이 깨어질 수 있다. 어느 쪽이 올바른 값인가?
- 데이터를 중복하여 저장하므로 더 많은 저장 공간이 필요

### 정규화/역정규화는 각각 언제 사용하는 것이 좋을까요?

정규화 : 이상현상이 생기거나, 저장공간의 제약이 있을 때 고려한다. 또한 무결성이 중요할 때도 고려한다.

역졍규화 : 테이블에 지나치게 조인을 많이 사용하게 되어 데이터를 조회하는 것이 기술적으로 어려울 경우
