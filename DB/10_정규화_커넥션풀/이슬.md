# 📍 키워드
- 이상 현상, 정규화, 역정규화
    - https://mangkyu.tistory.com/110
- DB 커넥션 풀

<br>

# 📍 예상 질문
<details>
<summary>정규화는 무엇인가요?</summary>
<div markdown="1">

- 정규화는 데이터베이스 설계에서 중요한 개념으로, 데이터 중복을 최소화하고 데이터의 무결성을 유지하기 위한 과정입니다. 이 과정에서 데이터베이스의 테이블과 그 관계를 조직화하며, 이는 데이터베이스의 효율성, 유지 관리, 속도 등 여러 가지 측면에서 이점을 가져다 줍니다.
- 정규화는 여러 단계로 이루어져 있으며, 첫 번째 정규 형태(1NF)부터 시작하여, 보다 복잡한 요구 사항을 처리하기 위해 더 높은 단계의 정규 형태(2NF, 3NF, BCNF 등)로 나아갑니다. 각 단계에서는 특정한 종류의 이상 현상을 제거할 수 있습니다.

</div>
</details>
<details>
<summary>정규화의 목적은 무엇인가요?</summary>
<div markdown="1">

- 정규화의 주요 목적은 다음과 같습니다:
1. 데이터 중복 최소화: 데이터 중복은 데이터베이스의 저장 공간을 낭비하고, 데이터를 업데이트할 때 일관성 문제를 초래할 수 있습니다. 정규화를 통해 데이터 중복을 최소화하면, 데이터베이스의 크기를 줄일 수 있고, 데이터 무결성을 보장할 수 있습니다.
2. 데이터 무결성 유지: 정규화를 통해 각 테이블이 하나의 특정 주제에 대한 정보만을 가지도록 설계되므로, 데이터의 무결성을 유지하는 데 도움이 됩니다.
3. 유연한 데이터베이스 구조 생성: 정규화된 데이터베이스는 데이터의 추가, 삭제, 수정이 더 쉽습니다. 이는 각 테이블이 하나의 주제에 대한 정보만을 가지고 있기 때문입니다.
4. 효율적인 쿼리 작성 가능: 정규화된 데이터베이스에서는 데이터가 논리적으로 저장되어 있기 때문에, 쿼리 작성이 더 쉽고 효율적입니다.
5. 데이터베이스 설계 최적화: 각 테이블과 그 관계를 잘 조직화하면, 데이터베이스의 전반적인 성능을 향상시키고, 유지 관리를 쉽게 할 수 있습니다.
- 따라서, 정규화는 데이터베이스 설계의 중요한 단계로, 데이터의 효율적인 관리와 조작을 가능하게 합니다

</div>
</details>
<details>
<summary>정규화를 하지 않을 경우, 발생할 수 있는 이상현상에 대해 설명해 주세요.</summary>
<div markdown="1">

- 정규화를 하지 않을 경우, 데이터베이스에서는 주로 세 가지 유형의 이상 현상이 발생할 수 있습니다.
1. 삽입 이상(Insertion Anomaly): 새로운 데이터를 삽입하려면 불필요한 데이터도 함께 제공해야 하는 상황입니다. 예를 들어, 학생과 과목에 대한 성적 정보를 한 테이블에 저장하는 경우, 새로운 과목을 추가하려면 해당 과목의 성적이 없는 학생에 대한 정보도 함께 입력해야 합니다.
2. 삭제 이상(Deletion Anomaly): 어떤 정보를 삭제하려고 할 때, 의도하지 않게 다른 중요한 정보까지 함께 삭제되는 상황입니다. 예를 들어, 마지막 학생이 특정 과목을 듣지 않게 된다면, 그 과목에 대한 모든 정보가 데이터베이스에서 사라질 수 있습니다.
3. 갱신 이상(Update Anomaly): 같은 정보를 여러 곳에 중복 저장해야 하는 경우, 일부만 변경되어 데이터가 불일치하게 되는 상황입니다. 예를 들어, 한 학생이 여러 과목을 수강하는 경우, 학생의 주소 정보가 여러 행에 걸쳐 중복 저장될 수 있습니다. 이 경우, 학생의 주소가 변경되면 모든 행을 찾아 일관되게 업데이트해야 하며, 일부만 업데이트하면 데이터 불일치 문제가 발생합니다.
- 이러한 이상 현상들은 데이터의 무결성을 손상시키고, 데이터베이스의 효율성을 떨어뜨립니다. 따라서 이를 방지하기 위해 정규화 과정이 필요합니다.

</div>
</details>
<details>
<summary>1NF, 2NF, 3NF, BCNF에 대해 설명해 주세요.</summary>
<div markdown="1">

- 1NF: 각 열은 원자적(더 이상 분해할 수 없는) 값만을 가지고, 각 행은 유일한 식별자(주 키)에 의해 식별됩니다. 즉, 테이블의 모든 열은 단일 값을 가져야 하며, 같은 테이블 내에서 중복 행이 없어야 합니다.
- 2NF: 1NF를 만족하면서, 테이블의 모든 열이 '전체적으로' 주 키에 함수적으로 종속되어야 합니다. 이는 테이블의 모든 열이 주 키에 대해 직접적으로 종속되어야 함을 의미합니다. 부분적 함수 종속성을 허용하지 않습니다.
- 3NF: 2NF를 만족하면서, 테이블의 모든 열이 주 키에만 함수적으로 종속되어야 합니다. 이는 테이블의 열이 주 키 외의 다른 열에 종속되어서는 안된다는 것을 의미합니다. 이를 통해 이행적 함수 종속성을 제거합니다.
- BCNF: 3NF를 만족하면서, 모든 결정자가 후보 키의 부분집합이어야 합니다. BCNF는 3NF의 엄격한 확장으로, 3NF에서는 여전히 발생할 수 있는 이상 현상을 제거합니다.

</div>
</details>
<details>
<summary>정규화와 성능 간의 관계에 대해 어떻게 생각하시나요?</summary>
<div markdown="1">

- 정규화는 데이터베이스의 설계를 개선하고, 데이터 무결성을 보장하며, 중복을 제거하는 등 많은 이점을 제공합니다. 그러나 이는 항상 성능 향상을 의미하는 것은 아닙니다.
- 정규화를해 테이블이 분리되면, 하나의 쿼리를 처리하기 위해 여러 테이블에 접근해야 할 수 있습니다. 이는 조인 연산을 추가로 필요로 하며, 이로 인해 시스템의 성능이 저하될 수 있습니다. 따라서 반드시 필요한 조인이 증가하면, 데이터베이스의 응답 시간이 늘어나고, 전반적인 성능이 저하될 수 있습니다.
- 또한, 정규화는 디스크 I/O를 증가시킬 수 있습니다. 데이터가 여러 테이블에 분산되어 있으면, 하나의 트랜잭션을 처리하기 위해 더 많은 디스크 읽기/쓰기 작업이 필요할 수 있습니다.
- 그러나 이런 단점들에도 불구하고, 정규화는 데이터 무결성을 보장하고, 데이터 관리를 용이하게 하는 등의 중요한 이점을 제공합니다. 따라서, 정규화와 성능 간의 관계는 항상 균형을 유지하는 것이 중요합니다. 경우에 따라서는 역정규화를 고려하여 성능을 향상시키는 것도 필요할 수 있습니다.

</div>
</details>
<details>
<summary>역정규화는 왜 필요한가요?</summary>
<div markdown="1">

- 역정규화는 정규화된 데이터베이스의 성능을 향상시키기 위해 일부러 중복을 허용하거나 테이블을 합치는 과정입니다.
- 정규화는 데이터 중복을 제거하고 무결성을 보장하는 등 많은 이점을 제공하지만, 이로 인해 추가적인 조인 연산이 필요해져 성능에 영향을 미칠 수 있습니다. 따라서 성능 최적화를 위해 역정규화를 적용하는 경우가 많습니다.
- 역정규화의 주요 목적은 다음과 같습니다:
1. 성능 향상: 데이터가 여러 테이블에 분산되어 있으면, 쿼리를 실행할 때 많은 조인 연산이 필요하게 됩니다. 역정규화를 통해 테이블을 합치거나 중복 데이터를 허용하면, 쿼리 실행 시 필요한 조인 연산의 수를 줄일 수 있습니다.
2. 읽기 성능 개선: 역정규화를 통해 데이터를 미리 계산하고 저장해두면, 데이터를 읽는 속도를 빠르게 할 수 있습니다. 이는 특히 대량의 데이터를 처리해야 하는 분석 쿼리에 유용합니다.
- 그러나 역정규화는 신중하게 적용해야 합니다. 데이터 중복이 늘어나면 데이터 일관성을 유지하는 데 어려움이 생길 수 있으며, 데이터를 업데이트할 때 추가적인 작업이 필요할 수 있습니다. 따라서 역정규화는 반드시 필요한 경우에만, 그리고 적절한 테스트와 검토를 거친 후에 적용해야 합니다.

</div>
</details>
<details>
<summary>역정규화를 적용할 때 주의해야 할 점은 무엇인가요?</summary>
<div markdown="1">

- 역정규화는 성능 향상을 위해 사용되지만, 신중하게 적용해야 합니다. 다음은 역정규화를 적용할 때 고려해야 할 주요 사항입니다:
1. 데이터 무결성 유지: 역정규화는 데이터 중복을 허용하므로, 데이터를 업데이트할 때 모든 중복 항목을 일관성 있게 업데이트하는 것이 중요합니다. 그렇지 않으면 데이터 무결성이 손상될 수 있습니다.
2. 업데이트 비용 고려: 중복 데이터를 유지하려면 추가적인 업데이트 비용이 발생합니다. 데이터가 변경될 때마다 모든 중복 항목을 업데이트해야 하므로, 이로 인한 비용을 고려해야 합니다.
3. 적절한 테스트와 검토: 역정규화는 데이터베이스의 구조를 변경하므로, 적용 전후로 성능 테스트를 실시해야 합니다. 또한, 역정규화가 데이터의 무결성에 미치는 영향을 검토해야 합니다.
4. 선택적 적용: 모든 테이블에 역정규화를 적용하는 것이 아니라, 성능에 크게 영향을 미치는 특정 테이블이나 쿼리에만 역정규화를 적용하는 것이 좋습니다.
- 역정규화는 성능 향상을 위한 중요한 도구지만, 잘못 적용하면 데이터 무결성 문제를 야기하거나, 오히려 성능을 저하시킬 수 있습니다. 따라서 역정규화는 신중하게 계획하고 적용해야 합니다.

</div>
</details>
<details>
<summary>데이터베이스 커넥션 풀이란 무엇인가요?</summary>
<div markdown="1">

- 데이터베이스 커넥션 풀은 데이터베이스 연결을 재사용 가능한 상태로 유지하는 캐시 또는 풀입니다. 클라이언트가 데이터베이스에 연결을 요청하면, 커넥션 풀에서 사용 가능한 연결을 제공합니다. 클라이언트가 작업을 완료하고 연결을 닫으면, 해당 연결은 종료되지 않고 커넥션 풀로 반환되어 다시 재사용될 수 있습니다.
- 데이터베이스 연결은 생성과 종료에 상당한 리소스가 소모되는 작업입니다. 매번 새로운 연결을 생성하고 종료하는 대신, 커넥션 풀을 사용하면 이미 생성된 연결을 재사용할 수 있어 성능이 향상됩니다. 이는 특히 동시에 많은 클라이언트가 데이터베이스에 접근해야 하는 상황에서 중요합니다.
- 이러한 방식으로, 커넥션 풀은 데이터베이스의 연결을 효율적으로 관리하고, 애플리케이션의 성능과 확장성을 향상시키는 역할을 합니다.

</div>
</details>
<details>
<summary>커넥션 풀을 사용하는 이유는 무엇인가요?</summary>
<div markdown="1">

- 커넥션 풀을 사용하는 주요 이유는 성능 향상과 리소스 최적화입니다. 다음은 커넥션 풀을 사용하는 이유를 자세히 설명한 내용입니다:
1. 성능 향상: 데이터베이스 연결을 맺는 과정은 비용이 큰 작업입니다. 이 때문에 필요할 때마다 새로운 연결을 생성하고 종료하는 것은 시간과 리소스가 많이 소모되므로 성능을 저하시킵니다. 반면에 커넥션 풀을 사용하면 이미 생성된 연결을 재사용할 수 있어 이런 부담을 줄이고 성능을 향상시킬 수 있습니다.
2. 리소스 최적화: 커넥션 풀은 한정된 수의 연결을 관리하므로, 동시에 많은 클라이언트가 데이터베이스에 접근해야 하는 상황에서도 효율적으로 리소스를 활용할 수 있습니다. 또한, 사용하지 않는 연결을 풀에서 제거하여 리소스를 더욱 효율적으로 관리할 수 있습니다.
3. 확장성 향상: 애플리케이션의 사용자 수가 증가하더라도, 커넥션 풀을 통해 데이터베이스 연결을 효율적으로 관리하면 애플리케이션의 확장성을 향상시킬 수 있습니다.
- 이처럼 커넥션 풀은 데이터베이스 연결의 관리를 단순화하고, 애플리케이션의 성능과 확장성을 향상시키는 중요한 역할을 합니다.

</div>
</details>
<details>
<summary>커넥션 풀의 동작 원리에 대해 설명해 주세요.</summary>
<div markdown="1">

1. 초기화: 커넥션 풀이 생성될 때, 일반적으로 설정된 풀 크기만큼의 데이터베이스 연결이 생성됩니다. 이 연결들은 비활성 상태로 풀에 저장되어 있습니다.
2. 연결 요청: 클라이언트가 데이터베이스 연결을 요청하면, 커넥션 풀은 비활성 연결 중 하나를 활성화시키고 이를 클라이언트에게 제공합니다. 만약 모든 연결이 이미 활성 상태라면, 클라이언트는 연결이 사용 가능해질 때까지 대기하거나, 요청이 거절될 수 있습니다.
3. 연결 반환: 클라이언트가 데이터베이스 작업을 완료하고 연결을 닫으면, 연결은 실제로는 닫히지 않고 다시 커넥션 풀로 반환됩니다. 이 연결은 다시 비활성 상태가 되어 다음 연결 요청을 위해 재사용됩니다.
4. 연결 관리: 커넥션 풀은 정기적으로 비활성 연결을 체크하여 오랫동안 사용되지 않거나 더 이상 유효하지 않은 연결을 제거합니다. 필요에 따라 새로운 연결을 생성하여 풀의 크기를 유지할 수도 있습니다.
- 이렇게 커넥션 풀을 사용하면, 각 연결 요청에 대해 새로운 데이터베이스 연결을 생성하고 종료하는 비용을 피할 수 있으며, 동시에 많은 클라이언트가 데이터베이스에 접근해야 하는 상황에서도 효율적으로 연결을 관리할 수 있습니다.

</div>
</details>
<details>
<summary>커넥션 풀이 고갈되었을 때 어떤 문제가 발생하나요? 이를 어떻게 해결해야 하는지 말해 주세요.</summary>
<div markdown="1">

- 커넥션 풀이 고갈되었을 때, 즉 모든 연결이 사용 중이고 더 이상 사용 가능한 연결이 없을 때, 다음과 같은 문제가 발생할 수 있습니다:
1. 응답 지연: 새로운 클라이언트 요청이 들어왔을 때, 사용 가능한 연결이 없다면 클라이언트는 연결이 사용 가능해질 때까지 대기해야 합니다. 이로 인해 애플리케이션의 응답 시간이 길어질 수 있습니다.
2. 요청 거절: 일부 커넥션 풀 구현체는 사용 가능한 연결이 없을 때 새로운 요청을 거절할 수 있습니다. 이 경우, 클라이언트는 데이터베이스에 연결하지 못하고 요청이 실패합니다.
- 이러한 문제를 해결하기 위해 다음과 같은 방법을 사용할 수 있습니다:
1. 풀 크기 조정: 커넥션 풀의 크기를 증가시키면 더 많은 연결을 처리할 수 있습니다. 그러나 이 방법은 추가적인 리소스를 사용하므로, 시스템의 리소스 한계와 애플리케이션의 요구 사항을 고려해야 합니다.
2. 커넥션 재사용 최적화: 데이터베이스 작업을 빨리 완료하고 연결을 빨리 반환하도록 코드를 최적화하면, 동일한 커넥션 풀 크기에서 더 많은 요청을 처리할 수 있습니다.
3. 연결 대기 시간 설정: 일정 시간 동안 사용 가능한 연결이 없을 때 클라이언트가 대기하는 시간을 설정할 수 있습니다. 그러나 이는 단지 문제를 완화시키는 방법일 뿐, 근본적인 해결책은 아닙니다.
4. 커넥션 풀 모니터링: 커넥션 풀의 상태를 지속적으로 모니터링하여, 풀이 고갈되는 상황을 미리 감지하고 대응할 수 있습니다. 이를 위해 커넥션 풀의 사용률, 평균 연결 대기 시간 등의 지표를 모니터링할 수 있습니다.

</div>
</details>

<br>

# 📍 Reference
- https://github.com/VSFe/Tech-Interview/blob/main/04-DATABASE.md
