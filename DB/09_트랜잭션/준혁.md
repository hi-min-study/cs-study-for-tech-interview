- 트랜잭션
  - 트랜잭션 개념
  - ACID
  - Commit, Rollback
  - 트랜잭션 격리수준
  - LOCK, 교착상태, 동시성
  - 트랜잭션 전파옵션

## 예상 질문
- 트랜잭션에 대해서 설명해주세요
  - 데이터베이스의 상태를 변화시키는 더 이상 분해가 불가능한 업무의 최소 단위를 말합니다.
- 트랜잭션의 4가지 특징인 ACID를 예시를 들어서 설명해주세요.
  - ACID는 원자성, 일관성, 고립성, 지속성 이렇게 4가지 트랜잭션의 특성을 나타내는 말입니다. 
  - 데이터베이스에서 무결성과 동시성 제어, recovery 등의 기능을 담당하고 있습니다.
  - 원자성(Atomic)은 전부 처리되거나 아예 하나도 처리되지 않는 전략이고, 예를 들어 A가 B에게 송금하는 트랜잭션을 실행하던 도중 시스템이 다운 되는 등 예외적인 상황이 발생했을 떄, A의 계좌에서 돈이 빠져나간 것 까지 rollback 처리하는 전략을 말합니다.
  - 일관성(Consistency)은 트랜잭션 수행 전과 후의 일관된 상태를 유지하는 성질을 말합니다. 예를 들어 A가 B에게 송금했을 때, 송금 전 A와 B의 계좌의 합과 송금 후의 A와 B의 계좌의 합이 동일하다는 특성을 말합니다.
  - 고립성(Isolation)은 한 트랜잭션이 데이터를 갱신하는 동안 이 트랜잭션이 완료되기 전에는 갱신 중인 데이터를 다른 트랜잭션들이 접근하지 못하도록 하는 성질을 말합니다. 예를 들어, 송금 과정에서 A의 계좌에서 돈이 나가고 B의 계좌로 입금이 되는 동안에 다른 트랜잭션이 A와 B의 계좌에 접근하지 못 하도록 막는 것을 말합니다.
  - 영속성(Durability)는 트랜잭션이 일단 그 실행을 성공적으로 완료하면 그 결과는 데이터베이스에 영속적으로 저장한다는 특성입니다.
- 트랜잭션에서 동시성 제어를 하지 않으면 발생할 수 있는 문제들을 설명해주세요.
  - lost update, 수행 중인 트랜잭션이 갱신한 내용을 다른 트랜잭션이 덮어 씀으로써 갱신이 무효가 되는 것을 말합니다.
  - dirty read, 완료되지 않은 트랜잭션이 갱신한 데이터를 읽는 것입니다
  - non-repeatable read, 한 트랜잭션이 동일한 데이터를 두 번 읽을 때 서로 다른 값을 읽는 것을 의미합니다.
  - phantom problem, 한 트랜잭션에서 같은 쿼리를 두 번 수행했는데, 첫 번째 쿼리에서 없던 유령 레코드가 두 번째 쿼리에서 나타나는 현상입니다.
- 트랜잭션 격리수준에 대해서 설명헤주세요
  - 격리 수준은 한 트랜잭션이 다른 트랜잭션과 고립되어야 하는 정도를 나타냅니다. 고립성이 낮으면 동시성이 높아지지만 데이터의 정확성이 떨어지고, 고립수준이 높으면 동시성이 낮아지지만 데이터의 정확성이 올라갑니다.
  - Read Uncommitted: 트랜잭션 내의 질의들이 공유 로크를 걸지 않고 데이터를 읽는다. 갱신하려는 데이터에 대해서는 독점 로크를 걸고, 트랜잭션이 끝날 때까지 보유한다.
  - Read Committed(oracle default): 트랜잭션 내의 질의들이 읽으려는 데이터에 대해 공유 로크를 걸고, 읽기가 끝나자마자 로크를 해제한다. 갱신하려는 데이터에 대해서는 독점 로크를 걸고, 트랜잭션이 끝날 때까지 보유한다.
  - Repeatable Read(mysql default): 트랜잭션 내의 질의들이 읽으려는 데이터에 대해 공유 로크를 걸고, 트랜잭션이 끝날 때까지 보유한다. 갱신하려는 데이터에 대해서는 독점 로크를 걸고, 트랜잭션이 끝날 때까지 보유한다.
  - Serializable Read: 질의에서 검색되는 튜플들뿐만 아니라 인덱스에 대해서도 공유 로크를 걸고 트랜잭션이 끝날 때까지 보유한다. 갱신하려는 데이터에 대해서는 독점 로크를 걸고, 트랜잭션이 끝날 때까지 보유한다.
- 자주 사용하는 트랜잭션 전파옵션인 REQUIRED와 REQUIRED_NEW에 대해서 예시와 함께 설명해주세요.
  - Required 옵션은 부모 트랜잭션이 있을 때, 자식 트랜잭션은 부모 트랜잭션에 합류하여 진행되는 옵션입니다. 예를 들어, 자전거를 구매할 때, 돈을 지불하는 트랜잭션을 A라 하고, 자전거를 지급하는 트랜잭션을 B라고 한다면 A를 부모 트랜잭션으로 둘 때, B를 Required 옵션으로 사용하면 됩니다.
  - Required_New 옵션은 부모 트랜잭션이 있을 때, 부모 트랜잭션을 중단하고 별도의 트랜잭션을 진행하는 옵션입니다. 예를 들어, 댓글을 다는 트랜잭션을 A, 알림을 보내는 트랜잭션을 B라고 한다면, B에서 예외가 발생했을 때, 댓글을 다는 행위까지 rollback 시키지 않게 하려면 B를 Required_New 옵션으로 사용하면 됩니다.  