```java
- 인증
    - 인증(authentication)과 인가(authorization)의 차이
    - 쿠키
    - 세션
    - JWT
    - 쿠키, 세션, JWT 차이


## 인증과 인가의 특징과 차이에 대해서 설명해주세요.
인증은 Authentication으로 사용자가 서비스에 가입되어 있는지 확인하는 과정으로 웹서비스의 경우 아이디와 패스워드를 사용해 인증 과정을 수행합니다. 로그인 과정에서 주로 진행되며, 사용자가 서비스에 접근할 수 있는지 확인합니다. 인가는 Authorization으로 인증된 사용자에 대해 자원이나 작업에 대한 권한을 확인하는 과정으로
로그인 과정에서 진행되는 인증과 달리 인가는 사용자가 request를 할 때마다 서버에서 권한을 확인합니다.


## 쿠키와 세션에 대해서 설명해주세요.
- 쿠키란
    - 쿠키는 클라이언트의 로컬에 Key-Value쌍이 String 형태로 저장되는 데이터 파일입니다. 브라우저가 종료된 후에도 상태가 유지됩니다. 클라이언트의 상태 정보(이름, 값, 만료 날짜 및 시간, 경로정보)를 포함하고 있습니다.
- 세션이란
    - 세션은 일정 시간 같은 클라이언트로부터 들어오는 일련의 요청을 하나의 상태로 보고, 그 상태를 유지하는 기술입니다. 브라우저가 종료되기 전까지 상태가 유지됩니다. 상태 유지 수단으로 쿠키를 사용하지만, 사용자 정보를 클라이언트 로컬이 아닌 서버측에서 관리합니다.

## **쿠키와 세션은 언제 사용하나요?**
- 쿠키
    - 클라이언트 로컬에 저장되므로 보안에 취약해 로그인같은 인증에는 잘 쓰이지 않습니다.
    - 단순한 **아이디의 저장**이나, **쇼핑몰의 장바구니 담아두기** 같은 기능에 사용합니다.
- 세션: 보안상 중요한 작업인 **로그인 기능**에 사용됩니다.

## **세션기반 인증방식과 토큰기반 인증방식은 무엇인가요?**
**세션기반인증방식**은, 클라이언트에게 세션 ID를 발급해, 세션 정보를 서버에 저장하여 사용자를 검증하는 방식입니다.
**토큰기반방식**은, 따로 정보를 DB에 저장하지 않고 인증된 사용자에게 토큰을 발급하여, 서버에 요청시 토큰을 함께보내고, 이 토큰이 유효하지 확인하여 검증하는 방식입니다.
토큰기반방식은 사용자정보를 서버에 저장하지않고, 클라이언트의 요청에따라서 응답만하는 stateless한 구조를 가집니다.

## **세션기반 인증방식과 토큰기반 인증방식의 차이 (Token 기반 vs Session 기반)에 대해서 설명해주세요.**
두방식의 가장 큰 차이점은, 세션은 데이터베이스 서버에 저장된단는 점,
토큰은 클라이언트 측에서 저장한다는 점입니다.
세션 기반 인증은 클라이언트로부터 요청을 받으면 클라이언트의 상태 정보를 저장하므로 Stateful한 구조를 가지고,토큰 기반 인증은 상태 정보를 서버에 저장하지 않으므로 Stateless한 구조를 가집니다.

## 그렇다면 Stateful한 세션 기반의 인증 방식을 사용하게 된다면 어떠한 단점이 있을까요?
서버에 세션을 저장하기 때문에 사용자가 증가하면 서버에 과부하를 줄 수 있어 확장성이 낮습니다.
해커가 훔친 쿠키를 이용해 요청을 보내면 서버는 올바른 사용자가 보낸 요청인지 알 수 없습니다. (세션 하이재킹 공격)

## 그렇다면 세션 기반 인증과 토큰 기반 인증은 각각 어느 경우에 적합한가요?
단일 도메인이라면 세션 기반 인증을 사용하고, 아니라면 토큰 기반 인증을 사용하는 것이 적합하다고 생각합니다. 세션을 관리할 때 사용되는 쿠키는 단일 도메인 및 서브 도메인에서만 작동하도록 설계되어 있기 때문에 여러 도메인에서 관리하는 것은 어렵기떄문입니다. (CORS 문제)

## 쿠키와 세션의 장단점에 대해서 설명해주세요.
- 쿠키는 클라이언트 측에서 처리되며 브라우저 캐시에 저장되어서 빠른 데이터 전송 속도를 제공합니다. 하지만 브라우저 설정에 따라 쿠키를 거부할 수 잇으므로 사용자의 동의가 필요하고, 보안상에 문제가 있습니다.
- 세션은 서버에 저장되므로 보안성이 높고, 용량 제한이 없어서 대용량 데이터를 저장하기에 적합합니다. 하지만 서버 부하가 증가할 수 잇으며 쿠키에 비해 느린 속도를 보입니다.

## jwt가 무엇인가요?
JWT는 JSON Web Token의 약자로, 웹에서 사용되는 토큰 기반의 인증 방식 중 하나입니다.
JWT는 토큰 자체가 모든 정보를 가지고 있기 때문에 서버의 세션 저장소에 정보를 저장할 필요가 없으며, 사용자 정보를 인코딩하여 토큰에 저장하므로 클라이언트와 서버 간의 통신이 더욱 간편해집니다.

## jwt는 어떻게 이루어져있나요?
JWT는 3개의 파트로 이루어져 있습니다.

첫 번째 파트는 Header, 두 번째 파트는 Payload, 세 번째 파트는 Signature 입니다.
각 파트는 Base64Url로 인코딩되어 있으며, 각각 "."으로 구분되어 있습니다.

## 각 파트에 대해서 간단하게 설명해주세요.
- Header: JWT 토큰의 타입과 알고리즘 정보를 포함하는 JSON 객체입니다. 보통 JWT를 인코딩할 때 Base64Url로 인코딩되어 헤더 파트에 추가됩니다.
- Payload: JWT에 포함될 정보를 담고 있는 JSON 객체입니다. 클라이언트가 서버로 전달하려는 정보, 사용자 식별자, 권한 등이 포함될 수 있습니다. 마찬가지로 Base64Url로 인코딩되어 페이로드 파트에 추가됩니다.
- Signature: JWT를 인증하기 위한 서명 정보입니다. 서명을 생성하기 위해서는 Header와 Payload, 그리고 사전에 정해진 비밀키가 필요합니다. 보통 Header와 Payload를 합쳐서 하나의 문자열로 만든 후, 비밀키를 이용하여 서명합니다. 서명은 Base64Url로 인코딩되어 토큰 뒷부분에 추가됩니다.

## jwt와 세션 중 왜 jwt를 사용하셨나요?
서버의 자원을 사용하는 횟수가 세션에 비해 현저히 적고, 트래픽이 많아져 다중 서버로 늘렸을 때 문제 없이 사용할 수 있게 하기 위해서 입니다.
토큰이 노출될 경우, 보안에 취약해 질 수 있습니다.

## 보안 관련해서 해결 방안이 있을까요?
access token의 만료 시간을 짧게 설정한다거나, 만료된 토큰을 서버에 저장하여 검증하는 방법이 있습니다.
HTTPS를 사용하여 통신을 암호화해야 합니다.
```
