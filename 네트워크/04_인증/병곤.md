# 인증 질문

- 인증과 인과의 차이
    - **인증**은 사용자가 누구인지 확인하는 과정이며, **인가**는 인증된 사용자가 할 수 있는 작업을 결정하는 과정입니다.
- 쿠키, 세션의 차이에 대해 말해주세요
    
    ## 세션 vs 쿠키
    
    - **저장 위치**: 쿠키는 클라이언트(브라우저)에 저장되며, 세션은 서버 측에 저장됩니다.
    - **보안**: 세션은 쿠키보다 보안적으로 우수하다고 간주됩니다. 세션 데이터는 서버에 저장되기 때문에 클라이언트를 통해 직접적으로 접근할 수 없습니다.
    - **수명**: 쿠키는 개발자가 정한 만료 기간까지 유지되는 반면, 세션은 사용자가 브라우저를 닫거나 로그아웃할 때 종료됩니다.
- 쿠키, 세션의 장단점에 대해 말씀해주세요
    
    ### 쿠키(Cookies)
    
    ### 장점
    
    1. **클라이언트 측 저장**: 쿠키 데이터는 클라이언트(브라우저)에 저장되어 서버의 부하를 줄일 수 있습니다.
    2. **자동 인증**: 자동 로그인과 같은 기능을 구현할 때 쿠키를 사용하여 사용자 인증 정보를 저장하고, 이를 통해 사용자 경험을 향상시킬 수 있습니다.
    3. **용이한 관리**: 쿠키는 생성, 수정, 삭제가 간편하여 사용하기 쉽습니다.
    
    ### 단점
    
    1. **보안 취약성**: 쿠키 데이터는 클라이언트에 저장되기 때문에 변조되거나 노출될 위험이 있습니다.
    2. **크기 제한**: 쿠키는 대략 4KB로 크기에 제한이 있으며, 이로 인해 많은 정보를 저장하기 어렵습니다.
    3. **성능 이슈**: 모든 HTTP 요청마다 쿠키 데이터가 서버로 전송되므로 네트워크 트래픽이 증가하고, 결과적으로 성능 저하를 일으킬 수 있습니다.
    
    ### 세션(Sessions)
    
    ### 장점
    
    1. **보안성**: 세션 정보는 서버에 저장되므로 쿠키에 비해 보안성이 높습니다. 클라이언트는 세션 ID만을 가지고 있으며, 이는 데이터 노출 위험을 줄입니다.
    2. **데이터 제한 없음**: 세션은 서버에 저장되기 때문에 크기에 대한 제한이 없어 많은 양의 데이터를 저장할 수 있습니다.
    3. **효율적인 데이터 관리**: 사용자별로 세션을 구분하여 관리할 수 있으므로 보다 정밀한 사용자 관리가 가능합니다.
    
    ### 단점
    
    1. **서버 부하**: 모든 세션 데이터가 서버에 저장되므로, 많은 사용자가 접속하는 경우 서버의 메모리 부하가 증가할 수 있습니다.
    2. **스케일링 문제**: 여러 서버가 있는 환경에서 세션을 일관되게 유지하는 것이 어렵습니다. 세션 공유를 위한 추가적인 인프라가 필요할 수 있습니다.
    3. **세션 타임아웃 관리 필요**: 사용자가 오랫동안 활동하지 않을 경우 세션 타임아웃이 발생할 수 있으며, 이를 관리하기 위한 추가적인 로직이 필요합니다.
- 최근 쿠키, 세션에 사용자 정보를 저장한 경험이 있다면 자유롭게 말씀해주시고 둘 중에 하나를 선택한 이유도 말씀해주세요
    
    쿠키 사용 
    
    - 쿠키에 jwt를 저장하여 사용하였습니다.
    - jwt 세션과 비교하여 상대적으로 추가적인 저장소가 필요 없고
    - 서버를 확장하여도 부담이 적기 때문 입니다.
- jwt의 장단점에 대해 설명해주세요
    
    ### WT의 장점
    
    1. **자가 포함(Self-contained)**: JWT는 필요한 모든 정보를 자체적으로 가지고 있습니다. 이는 인증 정보, 토큰 발급자, 만료 시간 등을 포함할 수 있어 별도의 저장소에 대한 의존 없이 토큰 하나로 인증 및 권한 부여가 가능합니다.
    2. **확장성(Scalability)**: 서버의 리소스를 사용하지 않고 클라이언트 측에서 토큰을 저장(예: 브라우저의 로컬 스토리지)하기 때문에, 서버 기반 인증 시스템보다 확장성이 뛰어납니다.
    3. **모바일 애플리케이션 지원**: 모바일 환경과 서버리스 아키텍처에서도 JWT를 효과적으로 사용할 수 있어, 다양한 플랫폼과 어플리케이션에 적합합니다.
    4. **보안**: JWT는 디지털 서명되어 있어, 정보가 중간에 변경되지 않았는지 검증할 수 있습니다. 일반적으로 HMAC 알고리즘 혹은 RSA의 공개키/개인키 쌍을 사용하여 서명합니다.
    5. **효율성**: 인증 정보가 토큰 안에 포함되어 있기 때문에, 한 번의 네트워크 요청으로 인증과 데이터 교환을 동시에 처리할 수 있습니다.
    
    ### JWT의 단점
    
    1. **토큰 크기**: 자가 포함된 정보 때문에 JWT는 다른 인증 토큰에 비해 상대적으로 크기가 클 수 있습니다. 이는 네트워크 대역폭을 더 많이 사용하게 만들 수 있습니다.
    2. **토큰 취소의 어려움**: 일단 JWT가 발급되면 만료 시간이 도래할 때까지 유효합니다. 이는 토큰이 노출되었을 경우 즉시 무효화하기 어렵다는 것을 의미합니다. 이를 위한 별도의 메커니즘(예: 토큰 블랙리스팅)이 필요할 수 있습니다.
    3. **보안 고려사항**: 비록 JWT가 디지털 서명되어 데이터의 무결성을 보장하지만, 페이로드는 기본적으로 암호화되지 않습니다. 중요한 정보를 포함할 경우, 추가적인 암호화가 필요할 수 있습니다.
    4. **복잡한 구현**: 안전한 JWT 시스템을 구현하기 위해서는 만료 기간 관리, 서명 검증, 보안 취약점에 대한 이해 등 다양한 보안 고려사항을 충분히 이해하고 적용해야 합니다.
    5. **서버 상태 유지**: 일부 경우, JWT를 사용하더라도 사용자 상태를 서버에서 관리해야 할 수 있습니다(예: 사용자 로그인 상태 관리). 이는 JWT의 무상태(stateless) 장점을 저해할 수 있습니다.
- jwt의 구조에 대해 설명해주세요
    
    JWT는 세 부분으로 구성됩니다.
    
    - **헤더**: 토큰의 형식과 서명 알고리즘을 포함합니다.
    - **페이로드**: 사용자 정보, 세션 정보, 권한 등을 포함합니다.
    - **서명**: 헤더와 페이로드를 해시하여 생성된 값으로, 토큰의 위조 및 변조를 방지합니다.
- jwt를 클라이언트에서 변조해도 서버에서 어떻게 알 수 있는지 간단하게 말씀해주세요
    - 서버는 jwt를 헤더, 페이로드, 서명 세가지로 분리합니다.
    - 이 후 서버는 헤더와 페이로드를 암호 알고리즘(sha256등)으로 암호화 합니다.
    - 서버가 생성한 서명값과 클라이언트가 보낸 서명을 비교합니다.
    - 만약 일치하지 않는 다면 클라이언트가 변조 한 것을 알 수 있습니다.