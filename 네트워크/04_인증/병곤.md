# 인증

- 인증과 인가
    
    # 인증(Authentication) vs 인가(Authorization)
    
    시스템 보안에서 인증과 인가는 사용자의 접근 제어와 관련된 두 가지 중요한 개념입니다. 이 둘은 서로 다른 단계와 목적을 가지고 있습니다.
    
    ## 인증 (Authentication)
    
    인증은 사용자가 누구인지 확인하는 과정입니다. 사용자의 신원을 확인하기 위해 사용자 이름, 비밀번호, 이메일 주소, 휴대전화 번호 또는 생체 인식 정보 같은 자격 증명을 요구합니다.
    
    ### 주요 특징
    
    - **신원 확인**: 사용자가 제공한 자격 증명을 통해 사용자의 신원을 확인합니다.
    - **접근 전 단계**: 사용자가 시스템에 접근하기 전에 수행되는 첫 번째 단계입니다.
    - **다양한 방법**: 비밀번호, 이중 인증(2FA), 다중 인증(MFA), 생체 인식 등 다양한 인증 방법이 사용될 수 있습니다.
    
    ## 인가 (Authorization)
    
    인가는 인증된 사용자가 수행할 수 있는 작업의 범위를 결정하는 과정입니다. 즉, 사용자가 시스템 내에서 어떤 자원에 접근하고, 어떤 작업을 수행할 수 있는지를 정의합니다.
    
    ### 주요 특징
    
    - **권한 부여**: 사용자에게 특정 자원이나 데이터에 대한 접근 권한을 부여합니다.
    - **인증 후 단계**: 사용자가 인증을 완료한 후에 수행되는 절차입니다.
    - **역할 기반 접근 제어(RBAC)**: 사용자의 역할에 따라 접근 권한을 제어하는 방식 등이 있습니다.
    
    ## 결론
    
    - **인증**은 사용자가 누구인지 확인하는 과정이며, **인가**는 인증된 사용자가 할 수 있는 작업을 결정하는 과정입니다.
    - 인증은 시스템에 접근하는 사용자의 신원을 확인하는 첫 번째 단계이며, 인가는 그 다음 단계로, 사용자에게 특정 작업이나 자원에 대한 접근 권한을 부여하는 과정입니다.
- 쿠키
    
    # 쿠키 (Cookies)
    
    쿠키는 사용자의 웹 브라우저에 저장되는 작은 텍스트 파일로, 웹사이트 사용자 경험을 개인화하고, 세션 관리, 사용자 행동 추적 등에 사용됩니다.
    
    ## 쿠키의 작동 방식
    
    - 웹사이트를 방문할 때, 웹 서버는 사용자의 브라우저에 쿠키를 저장할 수 있는 요청을 보냅니다.
    - 이 쿠키에는 사용자 설정, 로그인 상태, 프로필 정보 등이 포함될 수 있습니다.
    - 사용자가 동일한 웹사이트를 다시 방문하면, 브라우저는 해당 사이트의 쿠키를 서버에 전송하여 사용자를 식별합니다.
    
    ## 쿠키의 보안
    
    - 쿠키 데이터는 암호화되지 않은 텍스트로 저장되므로, 중요한 정보(비밀번호, 결제 정보 등)를 저장하는 데 사용해서는 안 됩니다.
    - `Secure` 속성을 사용하여 HTTPS를 통해서만 쿠키가 전송되도록 할 수 있습니다.
    - `HttpOnly` 속성을 사용하면 JavaScript를 통한 쿠키의 접근을 방지할 수 있어, 크로스 사이트 스크립팅(XSS) 공격을 방지하는 데 도움이 됩니다.
    
    쿠키는 웹사이트의 사용성을 향상시키는 데 중요한 역할을 하지만, 사용자의 프라이버시와 보안에 영향을 줄 수 있으므로 적절한 관리와 사용이 필요합니다.
    
- 세션
    
    # 세션 (Session)
    
    세션은 클라이언트와 서버 간의 상호작용을 일정 시간 동안 유지하고 관리하는 메커니즘입니다. 웹 애플리케이션에서 사용자의 상태와 데이터를 서버 측에서 관리할 수 있게 해줍니다.
    
    ## 세션의 작동 방식
    
    - 사용자가 웹사이트에 접속하여 세션을 생성하는 행동(예: 로그인)을 할 때, 서버는 고유한 세션 ID를 생성합니다.
    - 이 세션 ID는 쿠키(또는 URL 파라미터)를 통해 사용자의 브라우저에 저장됩니다.
    - 사용자가 웹사이트를 탐색할 때마다, 브라우저는 세션 ID를 서버에 전송하여 사용자를 식별합니다.
    - 서버는 세션 ID를 기반으로 사용자의 상태와 데이터를 추적하고 관리합니다.
    
    ## 세션의 주요 용도
    
    - **사용자 인증**: 사용자가 로그인할 때 생성된 세션을 통해 로그인 상태를 유지합니다.
    - **상태 정보 관리**: 사용자의 선택, 행동, 입력 데이터 등을 임시로 저장하고 관리합니다.
    - **보안**: 중요한 정보를 클라이언트 측이 아닌 서버 측에서 관리함으로써 보안성을 강화합니다.
    
    ## 세션 vs 쿠키
    
    - **저장 위치**: 쿠키는 클라이언트(브라우저)에 저장되며, 세션은 서버 측에 저장됩니다.
    - **보안**: 세션은 쿠키보다 보안적으로 우수하다고 간주됩니다. 세션 데이터는 서버에 저장되기 때문에 클라이언트를 통해 직접적으로 접근할 수 없습니다.
    - **수명**: 쿠키는 개발자가 정한 만료 기간까지 유지되는 반면, 세션은 사용자가 브라우저를 닫거나 로그아웃할 때 종료됩니다.
    
    ## 세션의 단점
    
    - **서버 자원**: 모든 사용자의 정보를 서버 메모리에 저장하기 때문에, 대규모 트래픽이 발생하는 웹사이트의 경우 자원 사용량이 문제가 될 수 있습니다.
    - **스케일링 문제**: 서버가 여러 대인 환경에서 세션 일관성을 유지하기 위한 추가적인 구성이 필요할 수 있습니다.
    
    세션은 웹 애플리케이션에서 사용자 경험을 개인화하고 보안을 강화하는 중요한 역할을 합니다. 하지만, 자원 사용량과 스케일링 문제를 고려하여 적절히 관리되어야 합니다.
    
- JWT
    
    **1. 개요**
    
    JWT는 JSON 형식의 오픈 표준으로, 두 개 이상의 시스템 간에 안전하게 정보를 전달하는 데 사용됩니다. 주로 인증 및 권한 부여에 활용되며, 사용자 로그인 정보, 세션 정보, 사용자 권한 등을 담아 토큰으로 발급하여 사용자를 식별하고 권한을 제어하는 데 사용합니다.
    
    **2. 구조**
    
    JWT는 세 부분으로 구성됩니다.
    
    - **헤더**: 토큰의 형식과 서명 알고리즘을 포함합니다.
    - **페이로드**: 사용자 정보, 세션 정보, 권한 등을 포함합니다.
    - **서명**: 헤더와 페이로드를 해시하여 생성된 값으로, 토큰의 위조 및 변조를 방지합니다.
    
    **3. 작동 방식**
    
    1. 클라이언트는 서버에 로그인 요청을 보냅니다.
    2. 서버는 사용자 정보를 기반으로 JWT 토큰을 생성하고 클라이언트에게 발급합니다.
    3. 클라이언트는 JWT 토큰을 저장하고 향후 요청에 헤더에 포함하여 서버에 전송합니다.
    4. 서버는 토큰을 검증하고 사용자 정보 및 권한을 추출하여 요청을 처리합니다.
    
    **4. 장점**
    
    - **간단하고 가벼운 형식**: JSON 기반으로 직관적이고 가볍습니다.
    - **확장성**: 다양한 정보를 담을 수 있는 페이로드 구조를 가지고 있습니다.
    - **보안성**: 서명을 통해 위조 및 변조를 방지합니다.
    - **비 상태성**: 서버에 세션 정보를 유지하지 않아 확장성이 높습니다.
    
    **5. 단점**
    
    - **토큰 유출 위험**: 토큰이 유출되면 공격자가 사용자 정보를 탈취하거나 권한을 남용할 수 있습니다.
    - **서버 부하**: 토큰 검증 과정에서 서버 부하가 발생할 수 있습니다.
    - **크로스 도메인 문제**: 서로 다른 도메인 간에 토큰을 사용하는 경우 CORS 설정이 필요합니다.
    
    **6. 사용 예시**
    
    - **사용자 인증**: 로그인 후 사용자 정보를 담은 JWT 토큰을 발급하여 사용자를 식별합니다.
    - **API 인증**: API 요청에 JWT 토큰을 포함하여 사용자의 권한을 검증합니다.
    - **세션 관리**: JWT 토큰을 사용하여 세션 정보를 유지합니다.
    - **싱글 사인온 (SSO)**: 여러 시스템 간에 사용자 정보를 공유하기 위해 JWT 토큰을 사용합니다.
    
    **7. 참고자료**
    
    - JWT 공식 홈페이지: [https://jwt.io/](https://jwt.io/)
    - JSON Web Token 완벽 가이드: [[유효하지 않은 URL 삭제됨]]([유효하지 않은 URL 삭제됨])
    - JWT란 무엇인가? JWT의 작동 방식과 장점, 단점: [[유효하지 않은 URL 삭제됨]]([유효하지 않은 URL 삭제됨])
- 쿠킨, 세션, JWT 차이
    
    # 차이점
    
    - **저장 위치**: 쿠키는 클라이언트 측에, 세션은 서버 측에, JWT는 클라이언트 또는 서버 어디에든 저장될 수 있습니다.
    - **보안**: 세션은 사용자 정보를 서버에서 관리하기 때문에 쿠키나 JWT보다 상대적으로 안전할 수 있습니다. 하지만 JWT는 정보가 서명되어 있어 안전한 데이터 전송이 가능합니다.
    - **성능**: 세션은 서버의 자원을 사용하기 때문에 대규모로 사용될 경우 성능 저하의 원인이 될 수 있습니다. 반면, JWT는 상태를 서버가 아니라 토큰에 저장하기 때문에 서버 자원의 부담이 적습니다.